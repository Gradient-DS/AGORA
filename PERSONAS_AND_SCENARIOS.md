# AGORA v1.0 - Personas and Scenarios

## Doelgroep

AGORA v1.0 is ontworpen voor inspecteurs van de Nederlandse Voedsel- en Warenautoriteit (NVWA) die toezicht houden op voedselveiligheid, diergezondheid, productveiligheid en andere wettelijke verplichtingen binnen bedrijven.

De doelgroep bestaat uit operationele inspecteurs die dagelijks op locatie controles uitvoeren, vaak onder tijdsdruk, en die tijdens hun werkzaamheden veel te maken hebben met administratieve verplichtingen, informatieopvraging, rapportage en communicatie met ondernemers.

---

## Persona's

### Persona 1: Inspecteur Koen ‚Äì De specialist met praktijkkennis in de horeca

**Profiel:**
- **Leeftijd:** 40 jaar
- **Functie:** Inspecteur Voedselveiligheid Horeca
- **Locatie:** Regio Randstad
- **Ervaring:** 15 jaar, specialist in horecatoezicht en risicogericht inspecteren
- **Technologiegebruik:** Functioneel vaardig, maar kritisch op bruikbaarheid en snelheid

**Behoeften:**
- Snel overzicht van relevante bedrijfsinformatie bij aankomst op locatie
- Ondersteuning bij het juist documenteren van overtredingen en risico's
- Transparantie in hoe AGORA koppelt aan wetgeving en eerdere dossiers

**Hoe AGORA helpt:**
- Integreert vergunningen, bedrijfsgegevens en inspectiehistorie in √©√©n overzicht
- Helpt met het juridisch correct verwoorden van bevindingen in het rapport
- Legt bij elke suggestie uit welke regelgeving of informatiebron daaraan ten grondslag ligt

---

### Persona 2: Inspecteur Fatima ‚Äì De jonge professional

**Profiel:**
- **Leeftijd:** 32 jaar
- **Functie:** Inspecteur Productveiligheid
- **Locatie:** Regio Randstad
- **Ervaring:** 4 jaar NVWA, ambitieus en digitaal vaardig
- **Technologiegebruik:** Werkt graag mobiel, met moderne tools en integraties

**Behoeften:**
- Snel toegang tot juiste informatie in het veld
- Effici√´nte samenwerking met collega's en ondersteunende systemen
- Directe terugkoppeling van wat ze invoert of vraagt

**Hoe AGORA helpt:**
- Naadloze spraakinteractie met verschillende AI-agents
- Direct overzicht van relevante wetgeving, eerdere overtredingen en inspectiestatus
- AGORA leert mee: hoe vaker gebruikt, hoe beter afgestemd op haar werkwijze

---

### Persona 3: Inspecteur Jan ‚Äì De doorgewinterde veldinspecteur

**Profiel:**
- **Leeftijd:** 58 jaar
- **Functie:** Senior inspecteur Voedselveiligheid
- **Locatie:** Regio Noord-Nederland
- **Ervaring:** 30+ jaar werkervaring bij de NVWA
- **Technologiegebruik:** Basis digitaal vaardig, voorkeur voor eenvoudige, intu√Øtieve tools

**Behoeften:**
- Betrouwbare ondersteuning op locatie, met duidelijke uitleg van regels
- Zo min mogelijk gedoe met formulieren en IT-systemen
- Behoud van controle over inspectieproces, AGORA als "hulpmiddel", geen vervanging

**Hoe AGORA helpt:**
- Spraakgestuurde ondersteuning bij wet- en regelgeving
- Automatische rapportage, gebaseerd op mondelinge input
- Inzicht in historie van het bedrijf via dossieragent

---

## Gebruiksscenario's

### Scenario 1: Inspecteur Koen ‚Äì Horeca-inspectie met ernstige overtreding

**Context:** Reguliere hygi√´necontrole bij een restaurant in Den Haag

**Workflow:**

1. **Aankomst en inspectie starten**
   - Koen arriveert bij Restaurant Bella Rosa
   - Via headset: "Start inspectie bij Restaurant Bella Rosa"
   - AGORA activeert spec- en dossieragent
   
2. **Bedrijfsinformatie opvragen**
   - AGORA presenteert:
     - Exploitatievergunning sinds 2019
     - Toepasselijke regelgeving: Hygi√´necode voor de Horeca en Warenwetregeling
   - Koen vraagt: "Zijn er eerdere overtredingen bekend?"
   - AGORA antwoordt: Waarschuwing mei 2022 voor onvoldoende hygi√´nemaatregelen

3. **Bevindingen tijdens inspectie**
   - Koen constateert:
     - Sterke vislucht in keuken
     - Geopende ton met rauwe vis op kamertemperatuur
     - Naast afvoerputje vol schoonmaakmiddelresten
   - Dicteert bevindingen aan AGORA
   
4. **Analyse en handhaving**
   - AGORA koppelt situatie aan ernstige schending voedselveiligheidsregels
   - Criteria voor handhaving:
     - Herhaling eerder vergrijp
     - Bederfelijke waar op onveilige plek
     - Direct risico op voedselvergiftiging
   - Koen besluit tot handhaving
   - Procesverbaalagent genereert juridisch sluitend concept-proces-verbaal

5. **Afronden en rapportage**
   - Koen voegt opmerkingen toe over gedrag bedrijfsleider en gesprek
   - AGORA documenteert alles automatisch
   - Bij terugkomst op kantoor: volledig rapport inclusief:
     - Bronnen
     - Bevindingen
     - Overtredingen
     - Toegepaste wetgeving
   - Geen toetsenbord nodig

**Benodigde AGORA-capaciteiten:**
- ‚úÖ Bedrijfsinformatie ophalen (KVK, vergunningen)
- ‚úÖ Inspectiehistorie raadplegen
- ‚úÖ Regelgeving opzoeken en toepassen
- ‚úÖ Spraakinterface voor hands-free werken
- ‚úÖ Automatische rapportage genereren
- ‚ö†Ô∏è Proces-verbaal generatie (gedeeltelijk via reporting agent)

---

### Scenario 2: Inspecteur Fatima ‚Äì Productveiligheid speelgoed

**Context:** Controle op CE-markeringen en veiligheidsdocumentatie bij winkelketen in Den Haag

**Workflow:**

1. **Inspectie starten**
   - Fatima arriveert bij SpeelgoedPlaza
   - Start AGORA op telefoon
   - Zegt: "Start inspectie bij SpeelgoedPlaza"
   
2. **Bedrijfsinformatie en historie**
   - AGORA haalt automatisch op:
     - Geregistreerde productgroepen
     - Eerdere inspecties
     - Leveranciersinformatie
   - Fatima vraagt: "Zijn er eerder onveilige producten aangetroffen?"
   - AGORA: In 2023 producten zonder Nederlandstalige gebruiksaanwijzing, waarschuwing gegeven

3. **Product scanning en documentatie**
   - Fatima scant barcodes
   - Per product dicteert: "Geen CE-markering zichtbaar, geen conformiteitsverklaring aanwezig"
   - AGORA analyseert producten automatisch
   - Markeert als vermoedelijke overtredingen Europese speelgoedrichtlijn

4. **Regelgeving opzoeken**
   - Fatima vraagt meerdere keren: "Welk artikel geldt hier?"
   - AGORA toont direct juiste artikel uit richtlijn
   - Geeft suggesties voor inspectierapport

5. **Afronden en preview**
   - Fatima bevestigt mondeling
   - Voegt opmerking toe over medewerking winkelmanager
   - Bekijkt preview op telefoon:
     - Productfoto's
     - Locaties
     - Overtredingen
     - Juridische onderbouwing
   - Drukt op 'akkoord'
   - Rapport direct naar NVWA-systeem

**Benodigde AGORA-capaciteiten:**
- ‚úÖ Bedrijfsinformatie ophalen
- ‚úÖ Inspectiehistorie raadplegen
- ‚ö†Ô∏è Product scanning en registratie (niet ge√Ømplementeerd)
- ‚ö†Ô∏è Barcode scanning integratie (niet ge√Ømplementeerd)
- ‚úÖ Regelgeving opzoeken (EU-richtlijnen)
- ‚úÖ Automatische rapportage
- ‚ö†Ô∏è Foto-integratie in rapporten (niet volledig)
- ‚úÖ Mobiele interface

---

### Scenario 3: Inspecteur Jan ‚Äì Slagerij met herhaalde overtreding

**Context:** Inspectie op verzoek toezichtteam bij dorpsslager in Groningen

**Workflow:**

1. **Voorbereiding en aankomst**
   - Jan is niet bekend met bedrijf
   - Opent AGORA op tablet
   - Zegt: "Start inspectie bij Slagerij de Boer"

2. **Bedrijfsinformatie ophalen**
   - AGORA haalt direct op:
     - Exploitatievergunning sinds 1995
     - Onder toezicht vanwege eerdere signalen etikettering
   - Jan vraagt: "Wat is er eerder geconstateerd?"
   - AGORA: In 2021 waarschuwing voor onvolledige ingredi√´ntenvermelding bij zelfgemaakte vleeswaren

3. **Constatering en documentatie**
   - Jan constateert: producten zonder etiket in koeling
   - Dicteert: "Onge√´tiketteerde producten in de koeling, herhaling van eerdere overtreding"
   - AGORA markeert als mogelijke overtreding
   - Vraagt of Jan direct wil handhaven
   - Jan bevestigt

4. **Handhaving voorbereiden**
   - AGORA opent automatisch juiste wetsartikel
   - Genereert beknopt rapport
   - Geeft suggesties voor bewoordingen
   - Jan past mondeling aan

5. **Klantcommunicatie en afsluiting**
   - AGORA bereidt klantcommunicatie voor
   - Bij terugkomst op kantoor: alleen rapport controleren
   - Alles ingevuld, juridisch correct
   - Gebaseerd op mondelinge input
   - Geen formulieren, geen gezoek in systemen

**Benodigde AGORA-capaciteiten:**
- ‚úÖ Bedrijfsinformatie ophalen
- ‚úÖ Inspectiehistorie raadplegen (met nadruk op herhalingen)
- ‚úÖ Regelgeving opzoeken
- ‚úÖ Automatische rapportage
- ‚ö†Ô∏è Klantcommunicatie templates (niet ge√Ømplementeerd)
- ‚úÖ Eenvoudige spraakinterface
- ‚ö†Ô∏è Markering herhaalde overtredingen (gedeeltelijk)

---

## Capability Mapping

### Wat hebben we al?

#### MCP Servers (Tools)
1. **KVK Lookup** (Port 5004)
   - ‚úÖ Bedrijfsgegevens ophalen
   - ‚úÖ Activiteitsstatus controleren
   - ‚úÖ SBI-codes en activiteiten
   - ‚úÖ Insolventiestatus

2. **Regulation Analysis** (Port 5002)
   - ‚úÖ Semantisch zoeken in regelgeving
   - ‚úÖ Specifieke artikelen ophalen
   - ‚úÖ Context rond regelgeving
   - ‚úÖ Dutch + EU regulations + SPEC 37

3. **Reporting** (Port 5003)
   - ‚úÖ HAP rapport generatie
   - ‚úÖ Conversatie-analyse en data-extractie
   - ‚úÖ Verificatie van ontbrekende velden
   - ‚úÖ JSON + PDF output

#### Agents
1. **Regulation Agent**
   - ‚úÖ Regelgeving opzoeken en toepassen
   - ‚úÖ Compliance checks
   - ‚úÖ Citatieondersteuning
   - ‚úÖ Risico-analyse

2. **Reporting Agent**
   - ‚úÖ HAP rapport generatie
   - ‚úÖ Data extractie uit gesprekken
   - ‚úÖ Verificatie workflow
   - ‚úÖ Nederlandse taal support

### Wat missen we?

#### Critical Gaps

1. **‚ùå Dossier Agent / Inspectiehistorie Server**
   - **Functie:** Ophalen van eerdere inspecties en overtredingen
   - **Scenario's:** Alle drie scenario's vereisen dit
   - **Data bron:** Nog niet beschikbaar
   - **Suggestie:** **Fake MCP server bouwen voor demo** met:
     - Gesimuleerde inspectiehistorie
     - Overtredingen per bedrijf
     - Waarschuwingen en handhavingsacties
     - Datum en ernst van bevindingen
     - Link naar KVK nummer

2. **‚ùå Proces-verbaal Agent**
   - **Functie:** Juridisch sluitende proces-verbalen genereren
   - **Scenario's:** Koen en Jan scenario's
   - **Status:** Expliciet uitgesloten in opdracht ("ignore the proces-verbaal agent for now")
   - **Suggestie:** Lage prioriteit voor v1.0

#### Important Gaps

3. **‚ö†Ô∏è Product Scanning Capability**
   - **Functie:** Barcode scanning en productregistratie
   - **Scenario:** Fatima (productveiligheid)
   - **Suggestie:** MCP server met tools voor:
     - Barcode lookup (product database)
     - Product documentatie verificatie
     - CE-markering validatie
     - Link naar product compliance database

4. **‚ö†Ô∏è Foto/Evidence Management**
   - **Functie:** Foto's vastleggen en koppelen aan bevindingen
   - **Scenario's:** Alle scenario's kunnen hiervan profiteren
   - **Suggestie:** Uitbreiding reporting MCP server met:
     - Photo upload tool
     - Photo annotation
     - Koppeling foto's aan specifieke overtredingen

5. **‚ö†Ô∏è Klantcommunicatie Templates**
   - **Functie:** Gestandaardiseerde communicatie met ondernemers
   - **Scenario:** Jan scenario
   - **Suggestie:** Uitbreiding reporting agent met:
     - Brief templates
     - Email templates
     - Follow-up communication

#### Nice-to-have

6. **üìã Vergunningen Database**
   - **Functie:** Verificatie van exploitatievergunningen en certificaten
   - **Scenario's:** Koen en Jan
   - **Huidige status:** Gedeeltelijk via KVK
   - **Suggestie:** Aparte MCP server of uitbreiding KVK server

7. **üìã Herhalingen Tracking**
   - **Functie:** Automatisch markeren van herhaalde overtredingen
   - **Scenario's:** Koen en Jan
   - **Huidige status:** Kan via inspectiehistorie, maar geen geautomatiseerde logica
   - **Suggestie:** Logica in reporting agent voor:
     - Detectie herhalingen
     - Escalatie suggesties
     - Severity adjustment

---

## Prioritized Recommendations

### Must Have (voor demo v1.0)

1. **Fake Inspection History MCP Server** ‚≠ê‚≠ê‚≠ê
   - **Waarom:** Alle scenario's vereisen toegang tot eerdere inspecties
   - **Implementatie:** Simple in-memory store met hardcoded data
   - **Tools needed:**
     - `get_inspection_history(kvk_number)` ‚Üí List van eerdere inspecties
     - `get_company_violations(kvk_number)` ‚Üí Overtredingen per bedrijf
     - `check_repeat_violations(kvk_number, violation_type)` ‚Üí Is dit een herhaling?
   - **Data structure:**
     ```json
     {
       "kvk_number": "12345678",
       "inspections": [
         {
           "date": "2022-05-15",
           "inspector": "Jan Jansen",
           "type": "hygiene",
           "violations": [
             {
               "category": "hygiene_measures",
               "severity": "warning",
               "description": "Onvoldoende hygi√´nemaatregelen in keuken"
             }
           ],
           "follow_up_required": false
         }
       ]
     }
     ```

### Should Have (voor volledige v1.0)

2. **Dossier Agent** ‚≠ê‚≠ê
   - **Waarom:** Co√∂rdineren van bedrijfsinformatie uit meerdere bronnen
   - **Implementatie:** Nieuwe agent definitie die gebruikt maakt van:
     - KVK Lookup MCP
     - Inspection History MCP
     - Vergunningen data (indien beschikbaar)
   - **Responsibilities:**
     - Bedrijfsdossier samenstellen
     - Risicoprofiel opstellen
     - Historie samenvatten

3. **Product Compliance MCP Server** (voor Fatima scenario) ‚≠ê‚≠ê
   - **Tools:**
     - `lookup_product(barcode)` ‚Üí Product info
     - `check_ce_marking(product_id)` ‚Üí CE status
     - `get_product_regulations(product_category)` ‚Üí Toepasselijke regelgeving

### Could Have (toekomstige versies)

4. **Klantcommunicatie Tools** ‚≠ê
   - Uitbreiding reporting agent
   - Templates voor brieven en emails

5. **Evidence Management** ‚≠ê
   - Photo/document upload
   - Annotation tools

6. **Vergunningen Database** ‚≠ê
   - Dedicated MCP server of database integratie

---

## Technical Architecture Implications

### Current Agent Routing
De routing moet worden uitgebreid met:
- **Dossier Agent** (nieuw)

```python
class AgentSelection(BaseModel):
    selected_agent: Literal[
        "regulation-agent",
        "reporting-agent",
        "dossier-agent",  # NEW
    ]
```

### MCP Server Configuration
Uitbreiden van `APP_MCP_SERVERS`:
```bash
APP_MCP_SERVERS=regulation-analysis=http://localhost:5002,reporting=http://localhost:5003,kvk-lookup=http://localhost:5004,inspection-history=http://localhost:5005
```

### Integration Points
1. **Dossier Agent** roept tools aan van:
   - KVK Lookup (bedrijfsgegevens)
   - Inspection History (historie)
   - Regulation Analysis (toepasselijke regels op basis van SBI codes)

2. **Reporting Agent** gebruikt:
   - Inspection History (voor context over herhalingen)
   - Dossier Agent output (voor bedrijfscontext in rapport)

---

## Conclusion

AGORA v1.0 heeft een solide basis met de bestaande MCP servers en agents. De belangrijkste missing piece voor demo purposes is een **Inspection History MCP server** (kan fake zijn). Met deze toevoeging kunnen alle drie de scenario's succesvol worden gedemonstreerd.

De product scanning capability voor Fatima's scenario kan in een latere versie worden toegevoegd, maar is niet kritisch voor de eerste demo als we ons focussen op de horeca scenario's (Koen en Jan).

